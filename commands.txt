# Install ansible 2.6
pip install ansible==2.6

# Clone Kubespray repository
git clone https://github.com/kubernetes-sigs/kubespray.git

# Checkout to v2.8.1 commit
cd kubespray
git checkout v2.8.1

# Install dependencies from ``requirements.txt``
sudo pip install -r requirements.txt

# Copy ``inventory/sample`` as ``inventory/ec2cluster``
cp -rfp inventory/sample inventory/ec2cluster

# To run ansible playbook
ansible-playbook -i inventory/ec2cluster/hosts.ini --become --become-user=root cluster.yml

# To become root on the VM
sudo su

# To check if cluster is running
root@node1:/home/ubuntu# kubectl cluster-info

# To build image from Dockerfile
docker build -f "frontend.Dockerfile" -t "frontend" .

# To tag the image before pushing it to the docker hub
docker tag [local_image_tag] [docker_hub_repository_name]:[docker_hub_image_tag]

# To push the image to the docker hub using the same values as for tagging
docker push [docker_hub_repository_name]:[docker_hub_image_tag]

